<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/blog/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=blog/livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Life Hacks Series: 1. How to manage your Python Environment | Nemo&#39;s Blog</title>
<meta name="keywords" content="python, computer-science, tools, programming, artificial-intelligence, conda, pip, virtual-environment, environment-management, life-hacks">
<meta name="description" content="This is the first article in the Life Hacks Series. It covers how to manage your Python environment. Basically, it covers how to install packages, how to create a new environment, how to clone an environment, and how to pack an environment. A special mention is Conda-Pack, which really made my life a lot easier.">
<meta name="author" content="Nemo">
<link rel="canonical" href="http://localhost:1313/blog/posts/condapack/">
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<meta name="referrer" content="no-referrer-when-downgrade">
<link crossorigin="anonymous" href="/blog/assets/css/stylesheet.861c79de57c9db7acb194fc40ad15b8fc78b954c4ce73dd6d09ff1b9ac5207f1.css" integrity="sha256-hhx53lfJ23rLGU/ECtFbj8eLlUxM5z3W0J/xuaxSB/E=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/blog/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/blog/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/blog/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/blog/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/blog/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/blog/posts/condapack/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous">

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js" integrity="sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY" crossorigin="anonymous"></script>

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js" integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>


<script>
document.addEventListener("DOMContentLoaded", function() {
    renderMathInElement(document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "$", right: "$", display: false}
        ]
    });
});
</script>


<script>
    
    const konamiCode = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'b', 'a'];
    let konamiCodePosition = 0;
    
    document.addEventListener('keydown', function(e) {
        
        const key = e.key;
        
        
        const expectedKey = konamiCode[konamiCodePosition];
        
        
        if (key.toLowerCase() === expectedKey.toLowerCase()) {
            
            konamiCodePosition++;
            
            
            if (konamiCodePosition === konamiCode.length) {
                
                konamiCodePosition = 0;
                
                
                window.location.href = '/secret-page';
            }
        } else {
            
            konamiCodePosition = 0;
        }
    });
</script><meta property="og:url" content="http://localhost:1313/blog/posts/condapack/">
  <meta property="og:site_name" content="Nemo&#39;s Blog">
  <meta property="og:title" content="Life Hacks Series: 1. How to manage your Python Environment">
  <meta property="og:description" content="This is the first article in the Life Hacks Series. It covers how to manage your Python environment. Basically, it covers how to install packages, how to create a new environment, how to clone an environment, and how to pack an environment. A special mention is Conda-Pack, which really made my life a lot easier.">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-01-15T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-01-15T00:00:00+00:00">
    <meta property="article:tag" content="Python">
    <meta property="article:tag" content="Computer-Science">
    <meta property="article:tag" content="Tools">
    <meta property="article:tag" content="Programming">
    <meta property="article:tag" content="Artificial-Intelligence">
    <meta property="article:tag" content="Conda">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Life Hacks Series: 1. How to manage your Python Environment">
<meta name="twitter:description" content="This is the first article in the Life Hacks Series. It covers how to manage your Python environment. Basically, it covers how to install packages, how to create a new environment, how to clone an environment, and how to pack an environment. A special mention is Conda-Pack, which really made my life a lot easier.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://localhost:1313/blog/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Life Hacks Series: 1. How to manage your Python Environment",
      "item": "http://localhost:1313/blog/posts/condapack/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Life Hacks Series: 1. How to manage your Python Environment",
  "name": "Life Hacks Series: 1. How to manage your Python Environment",
  "description": "This is the first article in the Life Hacks Series. It covers how to manage your Python environment. Basically, it covers how to install packages, how to create a new environment, how to clone an environment, and how to pack an environment. A special mention is Conda-Pack, which really made my life a lot easier.",
  "keywords": [
    "python", "computer-science", "tools", "programming", "artificial-intelligence", "conda", "pip", "virtual-environment", "environment-management", "life-hacks"
  ],
  "articleBody": "Conda Conda is a package manager and environment management system that allows you to install, manage, and update packages and dependencies for your Python projects. It provides a flexible and efficient way to handle dependencies, especially for scientific computing and data science applications.\nInstall Conda You can either install Conda from Anaconda or Miniconda.\nThe difference between Anaconda and Miniconda is that Anaconda includes a large number of packages, while Miniconda includes only the core packages.\nFor full reference of the commonly used conda-related commands, you can refer to Conda Cheatsheet.\nCreate a new environment If you want to create a new environment with a specific Python version, you can use the following command:\nconda create -n myenv python=3.10 then you can activate the environment by:\nconda activate myenv or\nsource activate myenv Obviously, activating the environment is not only necessary after you create a new environment, but also every time you want to use the environment.\nInstall packages To install packages, you can use either conda or pip. I prefer using pip because it is more flexible and easier to manage.\npip install numpy for a specific version, you can use:\npip install numpy==1.21.0 Replicating other’s environments Here’s where things gets interesting (or drives me crazy from time to time). Commonly, we would have a repo, and there may be a requirements.txt or environment.yml file in the repo.\nIf you want to clone the environment, in the first case, you can use the following command:\nconda env create -f environment.yml In the second case, you can use the following command:\npip install -r requirements.txt Yet however, this does not always work perfectly. It’s rare that after you do the above and you can immediately run the code. Then you need to check the environment and the packages. Debugging the environment is a practice that have the following features:\nIt’s time-consuming. For the most part, you don’t know what you are doing and you can only pray that it works. After you successfully debugged the environment, you will find that you’ve learnt nothing. To add to the fun, when I am writing this article, my cursor AI assistant auto-completed the following sentence: Yeah, it really is a pain in the ass.\nCloning environments This is really where we can utilize some tools to make our life easier.\nMethod 1: Using SCP I personally really recommend installing conda under the same directory (e.g. /workspace/username/anaconda3)at every server. This gives you the flexibility to clone the environment from one server to another without having to worry about the file’s location.\nscp -r /home/username/anaconda3/envs/env_name username@server_ip:/home/username/anaconda3/envs/ immediately after you clone the environment, you can activate the environment by:\nsource activate env_name and you’re good to go.\nMethod 2: Exporting the environment and importing it For instance, you want to clone environment env_1 to env_2.\nFirst, you can export the environment by:\n# if you not in env_1 yet, you can activate it by: conda activate env_1 # then you can export the environment by: conda env export \u003e environment.yaml then you can scp the environment.yaml file to the server where you want to clone the environment.\nAt the other end (where you want to have env_2), you can import the environment by:\nconda env create -f environment.yaml However, this method is not perfect. Often what you encounter is some packages screaming errors. Then what you can do is to check the environment.yaml file, often the package throwing errors is formatted like this:\n- xxx=yyy=zzz Recursively remove =zzz to check if it works.\nHowever, this method really sucks, try to avoid it.\nMethod 3: Conda Pack (Highly Recommended) Conda Pack is a tool that allows you to pack your environment into a single file. This is useful when you want to share your environment with others or when you want to deploy your environment to a server.\nTo install Conda Pack, you can use the following command:\npip install conda-pack Packing the environment On the source machine, you can pack the environment by:\n# Pack environment my_env into my_env.tar.gz conda pack -n my_env # Pack environment my_env into out_name.tar.gz conda pack -n my_env -o out_name.tar.gz # Pack environment located at an explicit path into my_env.tar.gz conda pack -p /explicit/path/to/my_env Unpacking the environment On the target machine, you can unpack the environment by:\n# Unpack environment into directory `my_env` mkdir -p my_env tar -xzf out_name.tar.gz -C my_env # Use python without activating or fixing the prefixes. Most python # libraries will work fine, but things that require prefix cleanups # will fail. ./my_env/bin/python # Activate the environment. This adds `my_env/bin` to your path source my_env/bin/activate This really made my life a lot easier.\nRemainder Oh yeah, sometimes you may encounter permission issues. You can fix it by:\nchmod -R 777 my_env.tar.gz The 777 means that the file has read, write, and execute permissions for everyone. I mean it’s not a good practice from a security perspective, but it’s a quick fix. As long as you are sure about what you are doing, you can do it.\nFor more information, you can refer to the Conda Pack Documentation.\n",
  "wordCount" : "850",
  "inLanguage": "en",
  "datePublished": "2025-01-15T00:00:00Z",
  "dateModified": "2025-01-15T00:00:00Z",
  "author":[{
    "@type": "Person",
    "name": "Nemo"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/blog/posts/condapack/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Nemo's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/blog/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/blog/" accesskey="h" title="Nemo&#39;s Blog (Alt + H)">Nemo&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/blog/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/blog/posts/" title="Blog">
                    <span>Blog</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/blog/archives/" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/blog/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/blog/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://knightnemo.github.io" title="About Me">
                    <span>About Me</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:1313/blog/">Home</a>&nbsp;»&nbsp;<a href="http://localhost:1313/blog/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      Life Hacks Series: 1. How to manage your Python Environment
    </h1>
    <div class="post-meta"><span title='2025-01-15 00:00:00 +0000 UTC'>January 15, 2025</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;Nemo


      <div  class="meta-item">&nbsp·&nbsp
        <span id="busuanzi_container_page_pv"> Reads: <span id="busuanzi_value_page_pv"></span> times</span>
      </div>
    </div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul><ul>
                <li>
                    <a href="#conda" aria-label="Conda">Conda</a><ul>
                        
                <li>
                    <a href="#install-conda" aria-label="Install Conda">Install Conda</a></li>
                <li>
                    <a href="#create-a-new-environment" aria-label="Create a new environment">Create a new environment</a></li>
                <li>
                    <a href="#install-packages" aria-label="Install packages">Install packages</a></li>
                <li>
                    <a href="#replicating-others-environments" aria-label="Replicating other&rsquo;s environments">Replicating other&rsquo;s environments</a></li></ul>
                </li></ul>
                    
                <li>
                    <a href="#cloning-environments" aria-label="Cloning environments">Cloning environments</a><ul>
                        
                <li>
                    <a href="#method-1-using-scp" aria-label="Method 1: Using SCP">Method 1: Using SCP</a></li>
                <li>
                    <a href="#method-2-exporting-the-environment-and-importing-it" aria-label="Method 2: Exporting the environment and importing it">Method 2: Exporting the environment and importing it</a></li>
                <li>
                    <a href="#method-3-conda-pack-highly-recommended" aria-label="Method 3: Conda Pack (Highly Recommended)">Method 3: Conda Pack (Highly Recommended)</a><ul>
                        
                <li>
                    <a href="#packing-the-environment" aria-label="Packing the environment">Packing the environment</a></li>
                <li>
                    <a href="#unpacking-the-environment" aria-label="Unpacking the environment">Unpacking the environment</a></li>
                <li>
                    <a href="#remainder" aria-label="Remainder">Remainder</a>
                </li>
            </ul>
            </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="conda">Conda<a hidden class="anchor" aria-hidden="true" href="#conda">#</a></h2>
<p>Conda is a package manager and environment management system that allows you to install, manage, and update packages and dependencies for your Python projects. It provides a flexible and efficient way to handle dependencies, especially for scientific computing and data science applications.</p>
<h3 id="install-conda">Install Conda<a hidden class="anchor" aria-hidden="true" href="#install-conda">#</a></h3>
<p>You can either install Conda from <a href="https://www.anaconda.com/products/distribution">Anaconda</a> or <a href="https://docs.conda.io/en/latest/miniconda.html">Miniconda</a>.</p>
<p>The difference between Anaconda and Miniconda is that Anaconda includes a large number of packages, while Miniconda includes only the core packages.</p>
<p>For full reference of the commonly used conda-related commands, you can refer to <a href="https://docs.conda.io/projects/conda/en/latest/_downloads/843d9e0198f2a193a3484886fa28163c/conda-cheatsheet.pdf">Conda Cheatsheet</a>.</p>
<h3 id="create-a-new-environment">Create a new environment<a hidden class="anchor" aria-hidden="true" href="#create-a-new-environment">#</a></h3>
<p>If you want to create a new environment with a specific Python version, you can use the following command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>conda create -n myenv python<span style="color:#f92672">=</span>3.10
</span></span></code></pre></div><p>then you can activate the environment by:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>conda activate myenv
</span></span></code></pre></div><p>or</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>source activate myenv
</span></span></code></pre></div><p>Obviously, activating the environment is not only necessary after you create a new environment, but also every time you want to use the environment.</p>
<h3 id="install-packages">Install packages<a hidden class="anchor" aria-hidden="true" href="#install-packages">#</a></h3>
<p>To install packages, you can use either <code>conda</code> or <code>pip</code>. I prefer using <code>pip</code> because it is more flexible and easier to manage.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>pip install numpy
</span></span></code></pre></div><p>for a specific version, you can use:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>pip install numpy<span style="color:#f92672">==</span>1.21.0
</span></span></code></pre></div><h3 id="replicating-others-environments">Replicating other&rsquo;s environments<a hidden class="anchor" aria-hidden="true" href="#replicating-others-environments">#</a></h3>
<p>Here&rsquo;s where things gets interesting (or drives me crazy from time to time). Commonly, we would have a repo, and there may be a <code>requirements.txt</code> or <code>environment.yml</code> file in the repo.</p>
<p>If you want to clone the environment, in the first case, you can use the following command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>conda env create -f environment.yml
</span></span></code></pre></div><p>In the second case, you can use the following command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>pip install -r requirements.txt
</span></span></code></pre></div><p>Yet however, this does not always work perfectly. It&rsquo;s rare that after you do the above and you can immediately run the code. Then you need to check the environment and the packages. Debugging the environment is a practice that have the following features:</p>
<ol>
<li>It&rsquo;s time-consuming.</li>
<li>For the most part, you don&rsquo;t know what you are doing and you can only pray that it works.</li>
<li>After you successfully debugged the environment, you will find that you&rsquo;ve learnt nothing.</li>
</ol>
<p>To add to the fun, when I am writing this article, my cursor AI assistant auto-completed the following sentence:
<img loading="lazy" src="../img/condapack/image.png">
Yeah, it really is a pain in the ass.</p>
<h1 id="cloning-environments">Cloning environments<a hidden class="anchor" aria-hidden="true" href="#cloning-environments">#</a></h1>
<p>This is really where we can utilize some tools to make our life easier.</p>
<h2 id="method-1-using-scp">Method 1: Using SCP<a hidden class="anchor" aria-hidden="true" href="#method-1-using-scp">#</a></h2>
<p>I personally really recommend installing conda under the same directory (e.g. <code>/workspace/username/anaconda3</code>)at every server. This gives you the flexibility to clone the environment from one server to another without having to worry about the file&rsquo;s location.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>scp -r /home/username/anaconda3/envs/env_name username@server_ip:/home/username/anaconda3/envs/
</span></span></code></pre></div><p>immediately after you clone the environment, you can activate the environment by:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>source activate env_name
</span></span></code></pre></div><p>and you&rsquo;re good to go.</p>
<h2 id="method-2-exporting-the-environment-and-importing-it">Method 2: Exporting the environment and importing it<a hidden class="anchor" aria-hidden="true" href="#method-2-exporting-the-environment-and-importing-it">#</a></h2>
<p>For instance, you want to clone environment <code>env_1</code> to <code>env_2</code>.</p>
<p>First, you can export the environment by:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># if you not in env_1 yet, you can activate it by:</span>
</span></span><span style="display:flex;"><span>conda activate env_1
</span></span><span style="display:flex;"><span><span style="color:#75715e"># then you can export the environment by:</span>
</span></span><span style="display:flex;"><span>conda env export &gt; environment.yaml
</span></span></code></pre></div><p>then you can scp the <code>environment.yaml</code> file to the server where you want to clone the environment.</p>
<p>At the other end (where you want to have <code>env_2</code>), you can import the environment by:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>conda env create -f environment.yaml
</span></span></code></pre></div><p>However, this method is not perfect. Often what you encounter is some packages screaming errors. Then what you can do is to check the <code>environment.yaml</code> file, often the package throwing errors is formatted like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>- <span style="color:#ae81ff">xxx=yyy=zzz</span>
</span></span></code></pre></div><p>Recursively remove <code>=zzz</code> to check if it works.</p>
<p>However, this method really sucks, try to avoid it.</p>
<h2 id="method-3-conda-pack-highly-recommended">Method 3: Conda Pack (Highly Recommended)<a hidden class="anchor" aria-hidden="true" href="#method-3-conda-pack-highly-recommended">#</a></h2>
<p>Conda Pack is a tool that allows you to pack your environment into a single file. This is useful when you want to share your environment with others or when you want to deploy your environment to a server.</p>
<p>To install Conda Pack, you can use the following command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>pip install conda-pack
</span></span></code></pre></div><h3 id="packing-the-environment">Packing the environment<a hidden class="anchor" aria-hidden="true" href="#packing-the-environment">#</a></h3>
<p>On the source machine, you can pack the environment by:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Pack environment my_env into my_env.tar.gz</span>
</span></span><span style="display:flex;"><span>conda pack -n my_env
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Pack environment my_env into out_name.tar.gz</span>
</span></span><span style="display:flex;"><span>conda pack -n my_env -o out_name.tar.gz
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Pack environment located at an explicit path into my_env.tar.gz</span>
</span></span><span style="display:flex;"><span>conda pack -p /explicit/path/to/my_env
</span></span></code></pre></div><h3 id="unpacking-the-environment">Unpacking the environment<a hidden class="anchor" aria-hidden="true" href="#unpacking-the-environment">#</a></h3>
<p>On the target machine, you can unpack the environment by:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Unpack environment into directory `my_env`</span>
</span></span><span style="display:flex;"><span>mkdir -p my_env
</span></span><span style="display:flex;"><span>tar -xzf out_name.tar.gz -C my_env
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Use python without activating or fixing the prefixes. Most python</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># libraries will work fine, but things that require prefix cleanups</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># will fail.</span>
</span></span><span style="display:flex;"><span>./my_env/bin/python
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Activate the environment. This adds `my_env/bin` to your path</span>
</span></span><span style="display:flex;"><span>source my_env/bin/activate
</span></span></code></pre></div><p>This really made my life a lot easier.</p>
<h3 id="remainder">Remainder<a hidden class="anchor" aria-hidden="true" href="#remainder">#</a></h3>
<p>Oh yeah, sometimes you may encounter permission issues. You can fix it by:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>chmod -R <span style="color:#ae81ff">777</span> my_env.tar.gz
</span></span></code></pre></div><p>The <code>777</code> means that the file has read, write, and execute permissions for everyone.
I mean it&rsquo;s not a good practice from a security perspective, but it&rsquo;s a quick fix. As long as you are sure about what you are doing, you can do it.</p>
<p>For more information, you can refer to the <a href="https://conda.github.io/conda-pack/">Conda Pack Documentation</a>.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/blog/tags/python/">Python</a></li>
      <li><a href="http://localhost:1313/blog/tags/computer-science/">Computer-Science</a></li>
      <li><a href="http://localhost:1313/blog/tags/tools/">Tools</a></li>
      <li><a href="http://localhost:1313/blog/tags/programming/">Programming</a></li>
      <li><a href="http://localhost:1313/blog/tags/artificial-intelligence/">Artificial-Intelligence</a></li>
      <li><a href="http://localhost:1313/blog/tags/conda/">Conda</a></li>
      <li><a href="http://localhost:1313/blog/tags/pip/">Pip</a></li>
      <li><a href="http://localhost:1313/blog/tags/virtual-environment/">Virtual-Environment</a></li>
      <li><a href="http://localhost:1313/blog/tags/environment-management/">Environment-Management</a></li>
      <li><a href="http://localhost:1313/blog/tags/life-hacks/">Life-Hacks</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="http://localhost:1313/blog/posts/titan/">
    <span class="title">« Prev</span>
    <br>
    <span>Titans: Learning to Memorize at Test Time</span>
  </a>
  <a class="next" href="http://localhost:1313/blog/posts/ml5/">
    <span class="title">Next »</span>
    <br>
    <span>Machine Learning Series: 5.Hyperparameter Selection</span>
  </a>
</nav>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Life Hacks Series: 1. How to manage your Python Environment on x"
            href="https://x.com/intent/tweet/?text=Life%20Hacks%20Series%3a%201.%20How%20to%20manage%20your%20Python%20Environment&amp;url=http%3a%2f%2flocalhost%3a1313%2fblog%2fposts%2fcondapack%2f&amp;hashtags=python%2ccomputer-science%2ctools%2cprogramming%2cartificial-intelligence%2cconda%2cpip%2cvirtual-environment%2cenvironment-management%2clife-hacks">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Life Hacks Series: 1. How to manage your Python Environment on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2flocalhost%3a1313%2fblog%2fposts%2fcondapack%2f&amp;title=Life%20Hacks%20Series%3a%201.%20How%20to%20manage%20your%20Python%20Environment&amp;summary=Life%20Hacks%20Series%3a%201.%20How%20to%20manage%20your%20Python%20Environment&amp;source=http%3a%2f%2flocalhost%3a1313%2fblog%2fposts%2fcondapack%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Life Hacks Series: 1. How to manage your Python Environment on reddit"
            href="https://reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fblog%2fposts%2fcondapack%2f&title=Life%20Hacks%20Series%3a%201.%20How%20to%20manage%20your%20Python%20Environment">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Life Hacks Series: 1. How to manage your Python Environment on facebook"
            href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fblog%2fposts%2fcondapack%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Life Hacks Series: 1. How to manage your Python Environment on whatsapp"
            href="https://api.whatsapp.com/send?text=Life%20Hacks%20Series%3a%201.%20How%20to%20manage%20your%20Python%20Environment%20-%20http%3a%2f%2flocalhost%3a1313%2fblog%2fposts%2fcondapack%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Life Hacks Series: 1. How to manage your Python Environment on telegram"
            href="https://telegram.me/share/url?text=Life%20Hacks%20Series%3a%201.%20How%20to%20manage%20your%20Python%20Environment&amp;url=http%3a%2f%2flocalhost%3a1313%2fblog%2fposts%2fcondapack%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Life Hacks Series: 1. How to manage your Python Environment on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=Life%20Hacks%20Series%3a%201.%20How%20to%20manage%20your%20Python%20Environment&u=http%3a%2f%2flocalhost%3a1313%2fblog%2fposts%2fcondapack%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/blog/">Nemo&#39;s Blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
    <div class="busuanzi-footer">
        <span id="busuanzi_container_site_pv">
            Total site visits: <span id="busuanzi_value_site_pv"></span> times
        </span>
        
    </div></footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
